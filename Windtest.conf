[General]
loglevel = notify
bypass-system = true
bypass-tun = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12,127.0.0.0/24
timeout = 5
test-timeout = 5
shared-jsvm-context = true
show-error-page-for-reject = true
network-framework = false
proxy-test-url = http://www.google.com/generate_204
internet-test-url = http://www.google.com/generate_204
skip-proxy = 127.0.0.1,  192.168.0.0/16, 192.168.1.0/16, 10.0.0.0/8, ::ffff:0.0.0.0/1, ::ffff:128.0.0.0/1, localhost, *.local, e.crashlytics.com, captive.apple.com,*ess.apple.com,
always-real-ip = *.nextdns.io,
tls-provider = openssl
tls = 13
ipv6 = false
external-controller-access = wind@0.0.0.0:6170
allow-wifi-access = true
http-listen = 0.0.0.0:6152
socks5-listen = 0.0.0.0:6153
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
use-default-policy-if-wifi-not-primary = true
dns-server = 8.8.8.8, 8.8.4.4, 1.1.1.1, 1.0.0.1
doh-server = https://dns.nextdns.io/f45755/Wind
doh-follow-outbound-mode = false
doh-format = wireformat
wifi-assist = true
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
tun-excluded-routes = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12
tun-included-routes = 192.168.1.12/32

[Replica]
hide-apple-request = 0
hide-crashlytics-request = 1
hide-crash-reporter-request = 1
hide-udp = 1
use-keyword-filter = false
keyword-filter-type = blacklist
keyword-filter = icloud,ocsp,logs,analytic,ads,iad,adthor,applovin,appnext,talk,dropbox,spys,branch,nexdns,.log,log.,measurement,lightricks,gmail.com,duckduckgo,nextdns,github,facebook,mzstatic,nordvpn,zalo,

[Proxy]
🟢 Wi-Fi = direct, interface=en0, allow-other-interface=true
🔵 Cellular(2G/3G/LTE) = direct, interface=pdp_ip0, allow-other-interface=true

[Proxy Group]
FINAL = ssid, default = WI-FI, cellular = CELLULAR
WI-FI = select, 🟢 Wi-Fi, PROXY
CELLULAR = select, 🔵 Cellular(2G/3G/LTE), PROXY
PROXY = select, policy-path=https://raw.githubusercontent.com/TheSpeedX/PROXY-List/master/http.txt, update-interval=21600, timeout=0, interval=0, tolerance=0
MEDIA = select, FINAL, PROXY
Facebook = select, FINAL, PROXY
SPEEDTEST = select, FINAL, PROXY
TikTok = select, FINAL, PROXY, 🟡
ADS = select, policy-path=https://raw.githubusercontent.com/langkhach270389/Scripting/master/Surge/servers/Ads.list, update-interval=-1
🟡 = url-test, url=http://www.google.com/generate_204, policy-path=https://raw.githubusercontent.com/TheSpeedX/PROXY-List/master/socks5.txt, update-interval=3600, timeout=0, interval=0, tolerance=0

[Rule]
USER-AGENT,FBiOSSDK*,ADS
DOMAIN-SUFFIX,connect.facebook.net,ADS
DOMAIN-SUFFIX,discovery.api.zaloapp.com,ADS
RULE-SET,https://raw.githubusercontent.com/langkhach270389/Scripting/master/Surge/rules/Facebook.list,Facebook
RULE-SET,https://raw.githubusercontent.com/langkhach270389/Scripting/master/Surge/rules/GoogleDrive.list,FINAL
RULE-SET,https://raw.githubusercontent.com/langkhach270389/Scripting/master/Surge/rules/YouTubeMusic.list,MEDIA
RULE-SET,https://raw.githubusercontent.com/langkhach270389/Scripting/master/Surge/rules/Youtube.list,MEDIA
RULE-SET,https://raw.githubusercontent.com/langkhach270389/Scripting/master/Surge/rules/Spotify.list,MEDIA
RULE-SET,https://raw.githubusercontent.com/nzw9314/Surge/master/Ruleset/TikTok.list,TikTok
RULE-SET,https://raw.githubusercontent.com/bigdargon/hostsVN/master/option/hostsVN-surge-exceptions-rule.conf,FINAL
RULE-SET,https://raw.githubusercontent.com/langkhach270389/Scripting/master/Surge/rules/Direct.list,FINAL
RULE-SET,https://raw.githubusercontent.com/langkhach270389/Scripting/master/Surge/rules/Speedtest.list,SPEEDTEST
RULE-SET,https://raw.githubusercontent.com/langkhach270389/Scripting/master/Surge/rules/Kakaotalk.list,ADS
RULE-SET,https://raw.githubusercontent.com/bigdargon/hostsVN/master/option/hostsVN-surge-rewrite.conf,ADS
RULE-SET,https://raw.githubusercontent.com/langkhach270389/Scripting/master/Surge/rules/BlockOTA.list,ADS
RULE-SET,https://raw.githubusercontent.com/bigdargon/hostsVN/master/option/hostsVN-surge-rule.conf,ADS
RULE-SET,https://raw.githubusercontent.com/langkhach270389/Scripting/master/Surge/rules/Antirevoke.list,ADS
AND,((DOMAIN,raw.githubusercontent.com), (USER-AGENT,Surge*)),FINAL,notification-text="♻️External Resources Update",notification-interval=3600
IP-CIDR,0.0.0.0/32,REJECT,no-resolve
# GEOIP,VN,FINAL
RULE-SET,LAN,FINAL
FINAL,FINAL,dns-failed

[Host]
lightning-sign.com = server:8.8.8.8
*.nordvpn.com = server:8.8.8.8
*dropbox* = server:8.8.8.8
*.ipv6.nextdns.io = server:0.0.0.0
*ess.apple.com = server:8.8.8.8
*.google.com = server:8.8.8.8
*.icloud.com = server:8.8.8.8
in.appcenter.ms = server:8.8.8.8
*.apple.com = server:8.8.8.8
*.crashlytics.com = server:8.8.8.8
ip6-localhost = ::1
ip6-loopback = ::1

[URL Rewrite]
(?<=_region=)CN(?=&) JP 307
(?<=&app_version=)16..(?=.?.?&) 1 307
(?<=\?version_code=)16..(?=.?.?&) 1 307

[SSID Setting]
"XSM-iPhone" cellular-mode=true

[MITM]
skip-server-cert-verify = true
ca-passphrase = 851E678C
ca-p12 = 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
